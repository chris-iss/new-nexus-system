<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice Course Enrollment</title>
    <link rel="stylesheet" href="index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <div class="wrapper">
      <div class="form-container">
        <div class="leftside">LeftSide</div>
        <div class="rightside">
          <p>Invoice Course Enrollment</p>
          <form class="form-right" id="enrollmentForm">
            <div class="input-email">
              <i class="fa-solid fa-envelope"></i>
              <input
                type="email"
                name="email"
                class="input"
                placeholder="Email"
                required
              />
            </div>

            <div class="input-status">
              <i class="fa-solid fa-square-poll-horizontal"></i>
              <select name="status" class="dropdown" required>
                <option value="" disabled selected>Select Course Status</option>
                <option value="new">New</option>
              </select>
            </div>

            <div class="input-course">
              <i class="fa-solid fa-book"></i>
              <select name="course" class="dropdown" required>
                <option value="" disabled selected>Select Course</option>
                <option value="certificate-business-sustainability">
                  Certificate in Business Sustainability
                </option>
                <option value="certificate-sustainability-plan-development">
                  Certificate in Sustainability Plan Development
                </option>
                <option value="certificate-sustainability-plan-implementation">
                  Certificate in Sustainability Plan Implementation
                </option>
                <option value="certificate-decarbonisation-net-zero">
                  Certificate in Decarbonisation: Achieving Net Zero
                </option>
                <option value="certificate-circular-economy">
                  Certificate in Circular Economy
                </option>
                <option value="certificate-business-biodiversity">
                  Certificate in Business with Biodiversity
                </option>
                <option value="certificate-diversity-equity-inclusion">
                  Certificate in Diversity Equity and Inclusion
                </option>
                <option value="certificate-sustainable-finance">
                  Certificate in Sustainable Finance
                </option>
                <option value="certificate-sustainable-business-operations">
                  Certificate in Sustainable Business Operations
                </option>
                <option value="certificate-sustainable-supply-chain">
                  Certificate in Sustainable Supply Chain
                </option>
                <option value="certificate-green-marketing">
                  Certificate in Green Marketing
                </option>
                <option value="certificate-esg-reporting-auditing">
                  Certificate in ESG Reporting and Auditing
                </option>
                <option value="diploma-business-sustainability">
                  Diploma in Business Sustainability
                </option>
              </select>
            </div>

            <div class="input-course">
              <i class="fa-regular fa-id-badge"></i>
              <select name="courseId" class="dropdown" required>
                <option value="" disabled selected>Select Course Id</option>
                <option value="2755212">
                  Certificate in Business Sustainability - 2755212
                </option>
                <option value="2755219">
                  Certificate in Sustainability Plan Development - 2755219
                </option>
                <option value="2755224">
                  Certificate in Sustainability Plan Implementation - 2755224
                </option>
                <option value="2755233">
                  Certificate in Decarbonisation: Achieving Net Zero - 2755233
                </option>
                <option value="2755243">
                  Certificate in Circular Economy - 2755243
                </option>
                <option value="2755260">
                  Certificate in Business with Biodiversity - 2755260
                </option>
                <option value="2755264">
                  Certificate in Diversity Equity and Inclusion - 2755264
                </option>
                <option value="2755272">
                  Certificate in Sustainable Finance - 2755272
                </option>
                <option value="2755276">
                  Certificate in Sustainable Business Operations - 2755276
                </option>
                <option value="2755278">
                  Certificate in Sustainable Supply Chain - 2755278
                </option>
                <option value="2755281">
                  Certificate in Green Marketing - 2755281
                </option>
                <option value="2755283">
                  Certificate in ESG Reporting and Auditing - 2755283
                </option>
                <option value="2730358">
                  Certificate in Corporate Sustainability Reporting Directive
                  (CSRD) - 2730358
                </option>
                <option value="2622273">
                  Diploma in Business Sustainability - 2622273
                </option>
              </select>
            </div>

            <div class="input-qty">
              <i class="fa-solid fa-calculator"></i>
              <select name="diplomaQty" class="dropdown" required>
                <option value="" disabled selected>
                  Select Diploma Quantity
                </option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </div>

            <div class="input-qty">
              <i class="fa-solid fa-calculator"></i>
              <select name="certQty" class="dropdown" required>
                <option value="" disabled selected>Select Cert Quantity</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </div>

            <div class="input-status">
              <i class="fa-solid fa-calendar-week"></i>
              <select name="date" class="dropdown" required>
                <option value="" disabled selected>Select a Date</option>
                <option value="2024-06-01">June 1, 2024</option>
                <option value="2024-06-15">June 15, 2024</option>
              </select>
            </div>

            <button type="submit" class="submit">Submit Request</button>
          </form>
        </div>
      </div>
    </div>

    <script>
        // Form submission logic
        const form = document.getElementById("enrollmentForm");
      
        form.addEventListener("submit", async (event) => {
          event.preventDefault(); // Prevent default form submission
      
          // Collect form data
          const formData = new FormData(form);
          const data = {};
      
          // Convert FormData to a regular object
          formData.forEach((value, key) => {
            data[key] = value;
          });
      
          // Debugging: Log form data
          console.log("Form Data:", data);
      
          try {
            // Send form data to the Netlify function endpoint
            const response = await fetch("/.netlify/functions/invoice_enrolment", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),  // Convert the data object to a JSON string
            });
      
            if (response.ok) {
              const result = await response.json();
              alert("Form submitted successfully!");
              console.log(result);
            } else {
              const errorResult = await response.json();
              alert("Error submitting form");
              console.error(errorResult);
            }
          } catch (error) {
            console.error("Error:", error);
            alert("Something went wrong. Please try again.");
          }
        });
      </script>
      
  </body>
</html>
